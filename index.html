<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Wavelength - V2 ‡∏•‡∏∑‡πà‡∏ô‡πÑ‡∏´‡∏•</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;700&display=swap');

        body {
            font-family: 'Kanit', sans-serif;
            background-color: #f0f4f8;
            margin: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            overflow: hidden;
            touch-action: none; /* ‡∏´‡πâ‡∏≤‡∏°‡πÄ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠ */
            user-select: none; /* ‡∏´‡πâ‡∏≤‡∏°‡∏Ñ‡∏•‡∏∏‡∏°‡∏î‡∏≥‡∏ï‡∏±‡∏ß‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠ */
            -webkit-user-select: none;
        }

        .game-card {
            background: white;
            border-radius: 24px;
            box-shadow: 0 15px 40px rgba(0,0,0,0.1);
            width: 95%;
            max-width: 650px;
            padding: 30px 20px;
            text-align: center;
            box-sizing: border-box;
        }

        .spectrum-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            font-size: 1.3rem;
            font-weight: 700;
        }
        
        .left-word { color: #d35400; text-align: left; width: 45%; line-height: 1.2; }
        .right-word { color: #2980b9; text-align: right; width: 45%; line-height: 1.2; }
        .arrow-divider { font-size: 2rem; color: #ccc; }

        /* ‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏´‡∏ô‡πâ‡∏≤‡∏õ‡∏±‡∏î */
        .dial-wrapper {
            position: relative;
            width: 100%;
            max-width: 400px; /* ‡∏Ç‡∏¢‡∏≤‡∏¢‡πÉ‡∏´‡πâ‡πÉ‡∏´‡∏ç‡πà‡∏Ç‡∏∂‡πâ‡∏ô */
            margin: 0 auto 20px auto;
            cursor: pointer;
            /* ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏£‡∏π‡πâ‡∏™‡∏∂‡∏Å‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏à‡∏±‡∏ö‡∏ï‡πâ‡∏≠‡∏á‡πÑ‡∏î‡πâ */
            transition: transform 0.1s;
        }
        .dial-wrapper:active {
            cursor: grabbing;
            transform: scale(1.02);
        }

        svg {
            width: 100%;
            height: auto;
            display: block;
            overflow: visible;
        }

        /* Screen Cover Animation */
        #screen-cover {
            transition: opacity 0.4s ease-in-out;
            pointer-events: none;
        }

        /* Controls */
        .controls {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 25px;
            flex-wrap: wrap;
        }

        button {
            padding: 14px 28px;
            border: none;
            border-radius: 50px;
            font-family: 'Kanit', sans-serif;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.2s;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            min-width: 140px;
        }
        button:active { transform: scale(0.95); box-shadow: 0 2px 5px rgba(0,0,0,0.1); }

        .btn-hide { background-color: #34495e; color: white; }
        .btn-next { background-color: #8e44ad; color: white; }

        .score-display {
            font-size: 1.4rem;
            margin-top: 20px;
            font-weight: bold;
            color: #7f8c8d;
            height: 50px; /* Fix height to prevent jumping */
            display: flex;
            align-items: center;
            justify-content: center;
        }
    </style>
</head>
<body>

    <div class="game-card">
        <h3 style="margin:0 0 20px 0; color:#bdc3c7; text-transform:uppercase; letter-spacing:2px;">Wavelength</h3>

        <div class="spectrum-container">
            <div class="left-word" id="word-left">‡∏ã‡πâ‡∏≤‡∏¢‡∏™‡∏∏‡∏î</div>
            <div class="arrow-divider">‚Üî</div>
            <div class="right-word" id="word-right">‡∏Ç‡∏ß‡∏≤‡∏™‡∏∏‡∏î</div>
        </div>

        <div class="dial-wrapper" id="dial-area">
            <svg viewBox="0 0 220 120">
                <path d="M 10 110 A 100 100 0 0 1 210 110" fill="none" stroke="#ecf0f1" stroke-width="20" stroke-linecap="round"/>
                
                <path d="M 10 110 A 100 100 0 0 1 210 110" fill="none" stroke="#bdc3c7" stroke-width="2" stroke-dasharray="2 8" opacity="0.5"/>

                <g id="target-group" transform="rotate(0, 110, 110)">
                    <path d="M 110 110 L 90 22 A 100 100 0 0 1 130 22 Z" fill="#f1c40f" opacity="0.6"/>
                    <path d="M 110 110 L 96 18 A 100 100 0 0 1 124 18 Z" fill="#e67e22" opacity="0.8"/>
                    <path d="M 110 110 L 102 14 A 100 100 0 0 1 118 14 Z" fill="#e74c3c"/>
                </g>

                <path id="screen-cover" d="M 5 110 A 105 105 0 0 1 215 110" fill="#3498db" stroke="white" stroke-width="2"/>

                <g id="pointer-group" transform="rotate(0, 110, 110)">
                    <line x1="110" y1="110" x2="10" y2="110" stroke="#c0392b" stroke-width="6" stroke-linecap="round" />
                    <circle cx="110" cy="110" r="8" fill="#c0392b" stroke="white" stroke-width="2"/>
                    <circle cx="10" cy="110" r="4" fill="#c0392b"/>
                </g>
            </svg>
        </div>

        <div class="score-display" id="score-text">...</div>

        <div class="controls">
            <button class="btn-hide" onclick="toggleScreen()">üëÅ ‡πÄ‡∏õ‡∏¥‡∏î/‡∏õ‡∏¥‡∏î ‡∏â‡∏≤‡∏Å</button>
            <button class="btn-next" onclick="newRound()">üé≤ ‡πÇ‡∏à‡∏ó‡∏¢‡πå‡πÉ‡∏´‡∏°‡πà</button>
        </div>
        <p style="font-size: 0.8rem; color: #aaa; margin-top: 15px;">‡∏Ñ‡∏•‡∏¥‡∏Å‡πÅ‡∏•‡∏∞‡∏•‡∏≤‡∏Å‡∏ó‡∏µ‡πà‡∏´‡∏ô‡πâ‡∏≤‡∏õ‡∏±‡∏î‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏´‡∏°‡∏∏‡∏ô‡πÄ‡∏Ç‡πá‡∏°</p>
    </div>

    <script>
        // --- ‡∏Ñ‡∏•‡∏±‡∏á‡∏Ñ‡∏≥ (‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÉ‡∏´‡πâ‡πÄ‡∏¢‡∏≠‡∏∞‡∏Ç‡∏∂‡πâ‡∏ô‡πÅ‡∏•‡∏∞‡∏´‡∏•‡∏≤‡∏Å‡∏´‡∏•‡∏≤‡∏¢) ---
        const categories = [
            ["‡∏£‡πâ‡∏≠‡∏ô", "‡∏´‡∏ô‡∏≤‡∏ß"], ["‡∏≠‡∏£‡πà‡∏≠‡∏¢", "‡πÑ‡∏°‡πà‡∏≠‡∏£‡πà‡∏≠‡∏¢"], ["‡∏°‡∏µ‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏ä‡∏ô‡πå", "‡πÑ‡∏£‡πâ‡∏™‡∏≤‡∏£‡∏∞"],
            ["‡∏á‡∏≤‡∏ô‡∏≠‡∏î‡∏¥‡πÄ‡∏£‡∏Å‡∏Ñ‡∏ô‡∏£‡∏ß‡∏¢", "‡∏á‡∏≤‡∏ô‡∏≠‡∏î‡∏¥‡πÄ‡∏£‡∏Å‡∏Ñ‡∏ô‡∏à‡∏ô"], ["‡∏´‡∏ô‡∏±‡∏á‡∏î‡∏µ", "‡∏´‡∏ô‡∏±‡∏á‡πÅ‡∏¢‡πà"], ["‡∏â‡∏•‡∏≤‡∏î", "‡πÇ‡∏á‡πà"],
            ["‡πÄ‡∏û‡∏•‡∏á‡πÄ‡∏®‡∏£‡πâ‡∏≤", "‡πÄ‡∏û‡∏•‡∏á‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∏‡∏Ç"], ["‡∏Ç‡∏≠‡∏á‡∏Å‡∏¥‡∏ô‡πÄ‡∏•‡πà‡∏ô", "‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏°‡∏∑‡πâ‡∏≠‡∏´‡∏•‡∏±‡∏Å"], ["‡∏Å‡∏•‡∏¥‡πà‡∏ô‡∏´‡∏≠‡∏°", "‡∏Å‡∏•‡∏¥‡πà‡∏ô‡πÄ‡∏´‡∏°‡πá‡∏ô"],
            ["‡∏Æ‡∏µ‡πÇ‡∏£‡πà", "‡∏ï‡∏±‡∏ß‡∏£‡πâ‡∏≤‡∏¢"], ["‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡∏ó‡∏≥‡∏¢‡∏≤‡∏Å", "‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡∏ó‡∏≥‡∏á‡πà‡∏≤‡∏¢"], ["‡∏ñ‡∏π‡∏Å‡∏Å‡∏é‡∏´‡∏°‡∏≤‡∏¢", "‡∏ú‡∏¥‡∏î‡∏Å‡∏é‡∏´‡∏°‡∏≤‡∏¢"],
            ["‡∏Ñ‡∏ô‡∏£‡∏±‡∏Å", "‡∏Ñ‡∏ô‡πÄ‡∏Å‡∏•‡∏µ‡∏¢‡∏î"], ["‡∏™‡∏Å‡∏õ‡∏£‡∏Å", "‡∏™‡∏∞‡∏≠‡∏≤‡∏î"], ["‡∏ô‡πà‡∏≤‡∏Å‡∏•‡∏±‡∏ß", "‡∏ô‡πà‡∏≤‡∏£‡∏±‡∏Å"],
            ["‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå", "‡πÅ‡∏ü‡∏ô‡∏ï‡∏≤‡∏ã‡∏µ"], ["‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏à‡∏£‡∏¥‡∏á", "‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÇ‡∏Å‡∏´‡∏Å"], ["‡πÄ‡∏Å‡∏¥‡∏ô‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô", "‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô‡∏°‡∏≤‡∏Å"],
            ["‡∏•‡πâ‡∏≤‡∏™‡∏°‡∏±‡∏¢", "‡∏ó‡∏±‡∏ô‡∏™‡∏°‡∏±‡∏¢"], ["‡∏£‡∏™‡∏à‡∏±‡∏î", "‡∏£‡∏™‡∏à‡∏∑‡∏î"], ["‡∏•‡∏±‡∏ö‡πÄ‡∏â‡∏û‡∏≤‡∏∞", "‡∏™‡∏≤‡∏ò‡∏≤‡∏£‡∏ì‡∏∞"],
            ["‡∏î‡∏≤‡∏£‡∏≤", "‡∏Ñ‡∏ô‡∏ò‡∏£‡∏£‡∏°‡∏î‡∏≤"], ["‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ñ‡∏π‡∏Å", "‡∏£‡∏≤‡∏Ñ‡∏≤‡πÅ‡∏û‡∏á"], ["‡∏ô‡∏∏‡πà‡∏°", "‡πÅ‡∏Ç‡πá‡∏á"],
            ["‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏î‡∏±‡∏á", "‡πÄ‡∏á‡∏µ‡∏¢‡∏ö"], ["‡πÄ‡∏ã‡πá‡∏Å‡∏ã‡∏µ‡πà", "‡πÑ‡∏°‡πà‡πÄ‡∏ã‡πá‡∏Å‡∏ã‡∏µ‡πà"], ["‡∏°‡∏µ‡∏°‡∏≤‡∏£‡∏¢‡∏≤‡∏ó", "‡∏´‡∏¢‡∏≤‡∏ö‡∏Ñ‡∏≤‡∏¢"],
            ["‡∏ô‡πà‡∏≤‡πÄ‡∏ö‡∏∑‡πà‡∏≠", "‡∏ï‡∏∑‡πà‡∏ô‡πÄ‡∏ï‡πâ‡∏ô"], ["‡∏™‡∏µ‡∏™‡∏î‡πÉ‡∏™", "‡∏™‡∏µ‡∏ó‡∏∂‡∏°‡πÜ"], ["‡πÉ‡∏ä‡πâ‡πÅ‡∏£‡∏á‡∏Å‡∏≤‡∏¢", "‡πÉ‡∏ä‡πâ‡∏™‡∏°‡∏≠‡∏á"],
            ["‡πÅ‡∏õ‡πä‡∏ö‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡πÄ‡∏™‡∏£‡πá‡∏à", "‡πÉ‡∏ä‡πâ‡πÄ‡∏ß‡∏•‡∏≤‡∏ô‡∏≤‡∏ô"], ["‡∏≠‡∏±‡∏ô‡∏ï‡∏£‡∏≤‡∏¢", "‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢"], ["‡∏Ç‡∏≠‡∏á‡πÉ‡∏ä‡πâ", "‡∏Ç‡∏≠‡∏á‡πÇ‡∏ä‡∏ß‡πå"],
            ["‡∏™‡∏±‡∏ï‡∏ß‡πå‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á", "‡∏™‡∏±‡∏ï‡∏ß‡πå‡∏õ‡πà‡∏≤"], ["‡∏•‡∏π‡∏Å‡∏Ñ‡∏∏‡∏ì‡∏´‡∏ô‡∏π", "‡πÄ‡∏î‡πá‡∏Å‡∏ö‡πâ‡∏≤‡∏ô‡πÜ"], ["‡∏®‡∏¥‡∏•‡∏õ‡∏∞", "‡∏û‡∏≤‡∏ì‡∏¥‡∏ä‡∏¢‡πå"],
            ["‡∏¢‡∏∏‡∏Ñ 90", "‡∏¢‡∏∏‡∏Ñ‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô"], ["‡∏Ç‡∏≠‡∏á‡πÅ‡∏ó‡πâ", "‡∏Ç‡∏≠‡∏á‡∏õ‡∏•‡∏≠‡∏°"], ["‡∏ï‡∏•‡∏Å", "‡πÄ‡∏Ñ‡∏£‡∏µ‡∏¢‡∏î"]
        ];

        // --- ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏£‡∏∞‡∏ö‡∏ö ---
        let targetAngle = 90; // ‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢ (0=‡∏ã‡πâ‡∏≤‡∏¢, 90=‡∏Å‡∏•‡∏≤‡∏á, 180=‡∏Ç‡∏ß‡∏≤) -- ‡πÅ‡∏ï‡πà‡πÉ‡∏ô SVG ‡πÄ‡∏£‡∏≤‡∏à‡∏∞‡πÅ‡∏°‡∏û‡∏Ñ‡πà‡∏≤‡∏≠‡∏µ‡∏Å‡∏ó‡∏µ
        let currentPointerValue = 0; // 0 ‡∏ñ‡∏∂‡∏á 180 (‡∏ã‡πâ‡∏≤‡∏¢‡πÑ‡∏õ‡∏Ç‡∏ß‡∏≤)
        let isScreenClosed = true;
        let isDragging = false;

        const dialArea = document.getElementById('dial-area');
        const pointerGroup = document.getElementById('pointer-group');
        const targetGroup = document.getElementById('target-group');
        const screenCover = document.getElementById('screen-cover');
        const scoreText = document.getElementById('score-text');

        // --- ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏°‡∏∏‡∏° (‡∏´‡∏±‡∏ß‡πÉ‡∏à‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏Ç‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏´‡∏°‡∏∏‡∏ô) ---
        function calculateAngle(e) {
            // ‡∏´‡∏≤‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏Å‡∏∂‡πà‡∏á‡∏Å‡∏•‡∏≤‡∏á‡∏Ç‡∏≠‡∏á‡∏´‡∏ô‡πâ‡∏≤‡∏õ‡∏±‡∏î (‡∏à‡∏∏‡∏î‡∏´‡∏°‡∏∏‡∏ô 110, 110 ‡πÉ‡∏ô SVG)
            const rect = dialArea.getBoundingClientRect();
            // ‡∏à‡∏∏‡∏î‡∏´‡∏°‡∏∏‡∏ô‡∏≠‡∏¢‡∏π‡πà‡∏ï‡∏£‡∏á‡∏Å‡∏•‡∏≤‡∏á‡πÅ‡∏ô‡∏ß‡∏ô‡∏≠‡∏ô ‡πÅ‡∏•‡∏∞‡∏≠‡∏¢‡∏π‡πà‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á‡∏Ç‡∏≠‡∏á‡∏Å‡∏•‡πà‡∏≠‡∏á SVG
            // SVG viewBox ‡∏Ñ‡∏∑‡∏≠ 220x120, ‡∏à‡∏∏‡∏î‡∏´‡∏°‡∏∏‡∏ô‡∏Ñ‡∏∑‡∏≠ (110, 110)
            // ‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡∏™‡∏±‡∏î‡∏™‡πà‡∏ß‡∏ô: ‡∏à‡∏∏‡∏î‡∏´‡∏°‡∏∏‡∏ô X ‡∏Ñ‡∏∑‡∏≠ 50% ‡∏Ç‡∏≠‡∏á width, Y ‡∏Ñ‡∏∑‡∏≠ (110/120) = 91.6% ‡∏Ç‡∏≠‡∏á height
            const centerX = rect.left + rect.width / 2;
            const centerY = rect.top + (rect.height * (110/120)); 

            let clientX, clientY;
            if (e.touches && e.touches.length > 0) {
                clientX = e.touches[0].clientX;
                clientY = e.touches[0].clientY;
            } else {
                clientX = e.clientX;
                clientY = e.clientY;
            }

            const dx = clientX - centerX;
            const dy = clientY - centerY;

            // Math.atan2(y, x) ‡πÉ‡∏´‡πâ‡∏Ñ‡πà‡∏≤‡∏°‡∏∏‡∏°‡πÄ‡∏õ‡πá‡∏ô Radians
            // ‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå: ‡∏Ç‡∏ß‡∏≤=0, ‡∏ö‡∏ô=-PI/2, ‡∏ã‡πâ‡∏≤‡∏¢=PI (‡∏´‡∏£‡∏∑‡∏≠ -PI)
            // ‡πÄ‡∏£‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏°‡∏û‡πÉ‡∏´‡πâ: ‡∏ã‡πâ‡∏≤‡∏¢=0 deg, ‡∏ö‡∏ô=90 deg, ‡∏Ç‡∏ß‡∏≤=180 deg (‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡∏á‡πà‡∏≤‡∏¢)
            
            let rad = Math.atan2(dy, dx); 
            let deg = rad * (180 / Math.PI); // ‡πÅ‡∏õ‡∏•‡∏á‡πÄ‡∏õ‡πá‡∏ô‡∏≠‡∏á‡∏®‡∏≤ (-180 ‡∏ñ‡∏∂‡∏á 180)

            // ‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö atan2:
            // ‡∏ã‡πâ‡∏≤‡∏¢ (-180) ... ‡∏ö‡∏ô (-90) ... ‡∏Ç‡∏ß‡∏≤ (0)
            // ‡πÄ‡∏£‡∏≤‡∏≠‡∏¢‡∏≤‡∏Å‡πÑ‡∏î‡πâ‡∏Ñ‡πà‡∏≤ 0..180 ‡πÇ‡∏î‡∏¢ 0 ‡∏Ñ‡∏∑‡∏≠‡∏ã‡πâ‡∏≤‡∏¢
            // ‡∏™‡∏π‡∏ï‡∏£: gameValue = deg + 180
            
            let gameValue = deg + 180;

            // Clamp ‡∏Ñ‡πà‡∏≤‡πÉ‡∏´‡πâ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏Ñ‡πà‡πÉ‡∏ô‡∏Ñ‡∏£‡∏∂‡πà‡∏á‡∏ß‡∏á‡∏Å‡∏•‡∏° (0-180)
            if (gameValue < 0) gameValue = 0;
            if (gameValue > 180) gameValue = 180;

            return gameValue;
        }

        function updateDialVisual(val0to180) {
            currentPointerValue = val0to180;
            // ‡πÉ‡∏ô SVG ‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤:
            // Group ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏ó‡∏µ‡πà Rotation 0 = ‡∏ä‡∏µ‡πâ‡πÑ‡∏õ‡∏ó‡∏≤‡∏á‡∏ã‡πâ‡∏≤‡∏¢ (‡∏ï‡∏≤‡∏°‡πÄ‡∏™‡πâ‡∏ô Line x2=10)
            // ‡∏ñ‡πâ‡∏≤ gameValue = 0 (‡∏ã‡πâ‡∏≤‡∏¢‡∏™‡∏∏‡∏î) -> ‡∏ï‡πâ‡∏≠‡∏á Rotate 0
            // ‡∏ñ‡πâ‡∏≤ gameValue = 90 (‡∏ï‡∏£‡∏á‡∏Å‡∏•‡∏≤‡∏á) -> ‡∏ï‡πâ‡∏≠‡∏á Rotate 90
            // ‡∏ñ‡πâ‡∏≤ gameValue = 180 (‡∏Ç‡∏ß‡∏≤‡∏™‡∏∏‡∏î) -> ‡∏ï‡πâ‡∏≠‡∏á Rotate 180
            // ‡∏™‡∏£‡∏∏‡∏õ‡∏Ñ‡∏∑‡∏≠‡πÉ‡∏ä‡πâ‡∏Ñ‡πà‡∏≤ gameValue ‡πÉ‡∏™‡πà rotate ‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢!
            pointerGroup.setAttribute('transform', `rotate(${val0to180}, 110, 110)`);
        }

        // --- Event Listeners (‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏ó‡∏±‡πâ‡∏á Mouse ‡πÅ‡∏•‡∏∞ Touch ‡πÅ‡∏ö‡∏ö‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå) ---
        
        function onDragStart(e) {
            isDragging = true;
            // ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏ó‡∏±‡∏ô‡∏ó‡∏µ‡∏ó‡∏µ‡πà‡πÅ‡∏ï‡∏∞
            const angle = calculateAngle(e);
            updateDialVisual(angle);
        }

        function onDragMove(e) {
            if (!isDragging) return;
            e.preventDefault(); // ‡∏Å‡∏±‡∏ô‡∏à‡∏≠‡∏•‡∏≤‡∏Å
            const angle = calculateAngle(e);
            updateDialVisual(angle);
        }

        function onDragEnd() {
            isDragging = false;
        }

        // Mouse Events
        dialArea.addEventListener('mousedown', onDragStart);
        window.addEventListener('mousemove', onDragMove); // ‡πÉ‡∏ä‡πâ window ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏•‡∏≤‡∏Å‡∏´‡∏•‡∏∏‡∏î‡∏Å‡∏£‡∏≠‡∏ö‡πÑ‡∏î‡πâ
        window.addEventListener('mouseup', onDragEnd);

        // Touch Events
        dialArea.addEventListener('touchstart', onDragStart, {passive: false});
        window.addEventListener('touchmove', onDragMove, {passive: false});
        window.addEventListener('touchend', onDragEnd);


        // --- Game Logic ---

        function newRound() {
            // 1. ‡∏™‡∏∏‡πà‡∏°‡∏Ñ‡∏≥
            const pair = categories[Math.floor(Math.random() * categories.length)];
            document.getElementById('word-left').innerText = pair[0];
            document.getElementById('word-right').innerText = pair[1];

            // 2. ‡∏™‡∏∏‡πà‡∏°‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢ (‡πÄ‡∏ß‡πâ‡∏ô‡∏Ç‡∏≠‡∏ö‡∏Ç‡πâ‡∏≤‡∏á‡∏•‡∏∞ 15 ‡∏≠‡∏á‡∏®‡∏≤ ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ‡∏¢‡∏≤‡∏Å‡πÄ‡∏Å‡∏¥‡∏ô)
            // targetAngle ‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤‡∏Ñ‡∏∑‡∏≠ 0(‡∏ã‡πâ‡∏≤‡∏¢) - 180(‡∏Ç‡∏ß‡∏≤)
            targetAngle = Math.floor(Math.random() * 150) + 15;
            
            // ‡∏´‡∏°‡∏∏‡∏ô SVG Target
            // Target Group ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏ó‡∏µ‡πà 0 ‡∏≠‡∏á‡∏®‡∏≤ = ‡∏ï‡∏±‡πâ‡∏á‡∏ï‡∏£‡∏á‡∏Å‡∏•‡∏≤‡∏á (90 ‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö gameValue ‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤)
            // ‡∏ñ‡πâ‡∏≤ targetAngle = 90 -> rotate(0)
            // ‡∏ñ‡πâ‡∏≤ targetAngle = 0 (‡∏ã‡πâ‡∏≤‡∏¢) -> rotate(-90)
            // ‡∏ñ‡πâ‡∏≤ targetAngle = 180 (‡∏Ç‡∏ß‡∏≤) -> rotate(90)
            // ‡∏™‡∏π‡∏ï‡∏£: rotate = targetAngle - 90
            const rotationOffset = targetAngle - 90;
            targetGroup.setAttribute('transform', `rotate(${rotationOffset}, 110, 110)`);

            // 3. ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ (‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏´‡πâ‡∏Ñ‡∏ô‡πÉ‡∏ö‡πâ‡∏î‡∏π‡∏Å‡πà‡∏≠‡∏ô)
            isScreenClosed = false; 
            screenCover.style.opacity = "0.15"; // ‡∏à‡∏≤‡∏á‡πÜ ‡πÉ‡∏´‡πâ‡∏Ñ‡∏ô‡πÉ‡∏ö‡πâ‡πÄ‡∏´‡πá‡∏ô‡πÄ‡∏õ‡πâ‡∏≤
            scoreText.innerHTML = "<span style='color:#d35400'>‡∏ï‡∏≤‡∏Ñ‡∏ô‡πÉ‡∏ö‡πâ: ‡∏î‡∏π‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢ ‚ûù ‡∏ö‡∏≠‡∏Å‡∏Ñ‡∏≥‡πÉ‡∏ö‡πâ ‚ûù ‡∏õ‡∏¥‡∏î‡∏â‡∏≤‡∏Å</span>";
            
            // ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡πÄ‡∏Ç‡πá‡∏°‡πÑ‡∏õ‡∏ï‡∏£‡∏á‡∏Å‡∏•‡∏≤‡∏á‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏ü‡∏£‡πå
            updateDialVisual(90);
        }

        function toggleScreen() {
            if (isScreenClosed) {
                // ‡πÄ‡∏õ‡∏¥‡∏î‡∏â‡∏≤‡∏Å (‡πÄ‡∏â‡∏•‡∏¢)
                screenCover.style.opacity = "0"; 
                isScreenClosed = false;
                calculateScore();
            } else {
                // ‡∏õ‡∏¥‡∏î‡∏â‡∏≤‡∏Å (‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ó‡∏≤‡∏¢)
                screenCover.style.opacity = "1";
                isScreenClosed = true;
                scoreText.innerHTML = "<span style='color:#2980b9'>‡∏ï‡∏≤‡∏ó‡∏µ‡∏°‡∏ó‡∏≤‡∏¢: ‡∏´‡∏°‡∏∏‡∏ô‡πÄ‡∏Ç‡πá‡∏°‡πÅ‡∏î‡∏á ‚ûù ‡∏°‡∏±‡πà‡∏ô‡πÉ‡∏à‡πÅ‡∏•‡πâ‡∏ß‡∏Å‡∏î‡πÄ‡∏õ‡∏¥‡∏î</span>";
            }
        }

        function calculateScore() {
            const diff = Math.abs(currentPointerValue - targetAngle);
            let points = 0;
            let msg = "";
            let color = "";

            // ‡πÇ‡∏ã‡∏ô‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô (‡∏≠‡∏¥‡∏á‡∏à‡∏≤‡∏Å‡∏°‡∏∏‡∏°‡∏≠‡∏á‡∏®‡∏≤)
            if (diff <= 4) { 
                points = 4; msg = "üéØ ‡πÄ‡∏õ‡πä‡∏∞‡πÄ‡∏ß‡∏≠‡∏£‡πå!! (4 ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô)"; color = "#e74c3c";
            } else if (diff <= 12) {
                points = 3; msg = "üëè ‡πÄ‡∏Å‡πà‡∏á‡∏°‡∏≤‡∏Å! (3 ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô)"; color = "#e67e22";
            } else if (diff <= 22) {
                points = 2; msg = "üëç ‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡πâ (2 ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô)"; color = "#f1c40f"; // ‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á‡πÄ‡∏Ç‡πâ‡∏°
            } else {
                points = 0; msg = "üòÖ ‡∏ß‡πà‡∏≤‡∏ß‡∏Ñ‡∏£‡∏±‡∏ö (0 ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô)"; color = "#95a5a6";
            }
            
            // ‡∏ó‡∏≥‡πÉ‡∏´‡πâ Text ‡πÄ‡∏î‡πâ‡∏á‡πÜ ‡∏´‡∏ô‡πà‡∏≠‡∏¢
            scoreText.innerHTML = `<span style='color:${color}; font-size:1.6rem; text-shadow:0 2px 4px rgba(0,0,0,0.1)'>${msg}</span>`;
        }

        // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏°‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÅ‡∏£‡∏Å
        newRound();

    </script>
</body>
</html>