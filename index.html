<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Wavelength - V2 ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏™‡∏≠‡∏ô‡πÄ‡∏•‡πà‡∏ô</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;700&display=swap');

        body {
            font-family: 'Kanit', sans-serif;
            background-color: #f0f4f8;
            margin: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            overflow: hidden;
            touch-action: none;
            user-select: none;
            -webkit-user-select: none;
        }

        /* --- ‡∏õ‡∏∏‡πà‡∏°‡∏™‡∏≠‡∏ô‡πÄ‡∏•‡πà‡∏ô (‡∏°‡∏∏‡∏°‡∏ã‡πâ‡∏≤‡∏¢‡∏ö‡∏ô) --- */
        .btn-rules {
            position: absolute;
            top: 20px;
            left: 20px;
            background: white;
            color: #34495e;
            padding: 10px 20px;
            border-radius: 30px;
            font-weight: bold;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            border: none;
            cursor: pointer;
            z-index: 100;
            display: flex;
            align-items: center;
            gap: 5px;
            font-family: 'Kanit', sans-serif;
        }
        .btn-rules:hover { background: #ecf0f1; }
        .btn-rules:active { transform: scale(0.95); }

        /* --- Modal Popup ‡∏™‡∏≠‡∏ô‡πÄ‡∏•‡πà‡∏ô --- */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(5px);
            z-index: 1000;
            display: flex;
            justify-content: center;
            align-items: center;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease;
        }
        .modal-overlay.active {
            opacity: 1;
            pointer-events: auto;
        }
        .modal-content {
            background: white;
            width: 90%;
            max-width: 500px;
            max-height: 85vh;
            overflow-y: auto;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 50px rgba(0,0,0,0.3);
            text-align: left;
            position: relative;
        }
        .modal-close {
            position: absolute;
            top: 15px;
            right: 20px;
            font-size: 1.5rem;
            cursor: pointer;
            color: #999;
            background: none;
            border: none;
        }
        .rule-step {
            margin-bottom: 20px;
            padding-bottom: 20px;
            border-bottom: 1px solid #eee;
        }
        .rule-step:last-child { border-bottom: none; }
        .rule-title { font-weight: bold; font-size: 1.1rem; color: #2c3e50; margin-bottom: 5px; }
        .rule-desc { font-size: 0.95rem; color: #555; line-height: 1.6; }
        .highlight { color: #d35400; font-weight: bold; }

        /* --- Styles ‡πÄ‡∏î‡∏¥‡∏° --- */
        .game-card {
            background: white;
            border-radius: 24px;
            box-shadow: 0 15px 40px rgba(0,0,0,0.1);
            width: 95%;
            max-width: 650px;
            padding: 30px 20px;
            text-align: center;
            box-sizing: border-box;
        }

        .spectrum-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            font-size: 1.3rem;
            font-weight: 700;
        }
        
        .left-word { color: #d35400; text-align: left; width: 45%; line-height: 1.2; }
        .right-word { color: #2980b9; text-align: right; width: 45%; line-height: 1.2; }
        .arrow-divider { font-size: 2rem; color: #ccc; }

        .dial-wrapper {
            position: relative;
            width: 100%;
            max-width: 400px;
            margin: 0 auto 20px auto;
            cursor: pointer;
            transition: transform 0.1s;
        }
        .dial-wrapper:active { cursor: grabbing; transform: scale(1.02); }

        svg { width: 100%; height: auto; display: block; overflow: visible; }
        #screen-cover { transition: opacity 0.4s ease-in-out; pointer-events: none; }

        .controls {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 25px;
            flex-wrap: wrap;
        }

        button.game-btn {
            padding: 14px 28px;
            border: none;
            border-radius: 50px;
            font-family: 'Kanit', sans-serif;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.2s;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            min-width: 140px;
        }
        button.game-btn:active { transform: scale(0.95); box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        .btn-hide { background-color: #34495e; color: white; }
        .btn-next { background-color: #8e44ad; color: white; }

        .score-display {
            font-size: 1.4rem;
            margin-top: 20px;
            font-weight: bold;
            color: #7f8c8d;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
    </style>
</head>
<body>

    <button class="btn-rules" onclick="toggleRules()">
        <span style="font-size:1.2rem;">üìñ</span> ‡∏ß‡∏¥‡∏ò‡∏µ‡πÄ‡∏•‡πà‡∏ô
    </button>

    <div class="modal-overlay" id="rulesModal" onclick="toggleRules(event)">
        <div class="modal-content" onclick="event.stopPropagation()"> <button class="modal-close" onclick="toggleRules()">‚úï</button>
            <h2 style="text-align:center; color:#8e44ad; margin-top:0;">‡∏ß‡∏¥‡∏ò‡∏µ‡πÄ‡∏•‡πà‡∏ô Wavelength</h2>
            
            <div class="rule-step">
                <div class="rule-title">1. ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô (‡∏ï‡∏≤‡∏Ñ‡∏ô‡πÉ‡∏ö‡πâ)</div>
                <div class="rule-desc">
                    ‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô 1 ‡∏Ñ‡∏ô‡∏£‡∏±‡∏ö‡∏ö‡∏ó‡πÄ‡∏õ‡πá‡∏ô <span class="highlight">"‡∏Ñ‡∏ô‡πÉ‡∏ö‡πâ"</span> (Psychic) ‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏° <span class="highlight">"‡πÇ‡∏à‡∏ó‡∏¢‡πå‡πÉ‡∏´‡∏°‡πà"</span> ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡∏™‡∏∏‡πà‡∏°‡∏Ñ‡∏≥‡∏ï‡∏£‡∏á‡∏Ç‡πâ‡∏≤‡∏°‡∏Å‡∏±‡∏ô (‡πÄ‡∏ä‡πà‡∏ô ‡∏£‡πâ‡∏≠‡∏ô - ‡∏´‡∏ô‡∏≤‡∏ß) ‡πÅ‡∏•‡∏∞‡∏™‡∏∏‡πà‡∏°‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡∏™‡∏µ‡πÜ ‡∏Ç‡∏∂‡πâ‡∏ô‡∏°‡∏≤ (‡∏ã‡∏∂‡πà‡∏á‡∏Ñ‡∏ô‡∏≠‡∏∑‡πà‡∏ô‡∏´‡πâ‡∏≤‡∏°‡∏î‡∏π!)
                </div>
            </div>

            <div class="rule-step">
                <div class="rule-title">2. ‡πÉ‡∏ö‡πâ‡∏Ñ‡∏≥</div>
                <div class="rule-desc">
                    ‡∏Ñ‡∏ô‡πÉ‡∏ö‡πâ‡∏î‡∏π‡∏ß‡πà‡∏≤‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡∏≠‡∏¢‡∏π‡πà‡∏ï‡∏£‡∏á‡πÑ‡∏´‡∏ô ‡πÅ‡∏•‡πâ‡∏ß‡∏û‡∏π‡∏î <span class="highlight">"‡∏Ñ‡∏≥‡πÉ‡∏ö‡πâ 1 ‡∏Ñ‡∏≥"</span> ‡∏ó‡∏µ‡πà‡∏Ñ‡∏¥‡∏î‡∏ß‡πà‡∏≤‡∏™‡∏∑‡πà‡∏≠‡∏ñ‡∏∂‡∏á‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏ô‡∏±‡πâ‡∏ô<br>
                    <em>‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á: "‡∏£‡πâ‡∏≠‡∏ô - ‡∏´‡∏ô‡∏≤‡∏ß" ‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡∏≠‡∏¢‡∏π‡πà‡∏Ñ‡πà‡∏≠‡∏ô‡πÑ‡∏õ‡∏ó‡∏≤‡∏á‡∏£‡πâ‡∏≠‡∏ô ‡πÅ‡∏ï‡πà‡πÑ‡∏°‡πà‡∏™‡∏∏‡∏î... ‡∏Ñ‡∏ô‡πÉ‡∏ö‡πâ‡∏û‡∏π‡∏î‡∏ß‡πà‡∏≤ <strong>"‡∏Å‡∏≤‡πÅ‡∏ü"</strong></em><br>
                    ‡∏à‡∏≤‡∏Å‡∏ô‡∏±‡πâ‡∏ô‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏° <span class="highlight">"‡∏õ‡∏¥‡∏î‡∏â‡∏≤‡∏Å"</span> ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ã‡πà‡∏≠‡∏ô‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢
                </div>
            </div>

            <div class="rule-step">
                <div class="rule-title">3. ‡∏ó‡∏µ‡∏°‡∏ó‡∏≤‡∏¢ (‡∏´‡∏°‡∏∏‡∏ô‡πÄ‡∏Ç‡πá‡∏°)</div>
                <div class="rule-desc">
                    ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô‡πÜ ‡πÉ‡∏ô‡∏ó‡∏µ‡∏°‡∏õ‡∏£‡∏∂‡∏Å‡∏©‡∏≤‡∏Å‡∏±‡∏ô‡∏ß‡πà‡∏≤ "‡∏Å‡∏≤‡πÅ‡∏ü" ‡∏°‡∏±‡∏ô‡∏£‡πâ‡∏≠‡∏ô‡∏£‡∏∞‡∏î‡∏±‡∏ö‡πÑ‡∏´‡∏ô‡πÉ‡∏ô‡∏™‡πÄ‡∏Å‡∏•‡∏ô‡∏µ‡πâ? ‡πÅ‡∏•‡πâ‡∏ß‡∏ä‡πà‡∏ß‡∏¢‡∏Å‡∏±‡∏ô <span class="highlight">‡∏´‡∏°‡∏∏‡∏ô‡πÄ‡∏Ç‡πá‡∏°‡∏™‡∏µ‡πÅ‡∏î‡∏á</span> ‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡∏à‡∏∏‡∏î‡∏ó‡∏µ‡πà‡∏Ñ‡∏¥‡∏î‡∏ß‡πà‡∏≤‡πÉ‡∏ä‡πà
                </div>
            </div>

            <div class="rule-step">
                <div class="rule-title">4. ‡πÄ‡∏â‡∏•‡∏¢‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</div>
                <div class="rule-desc">
                    ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏°‡∏±‡πà‡∏ô‡πÉ‡∏à ‡πÉ‡∏´‡πâ‡∏Å‡∏î <span class="highlight">"‡πÄ‡∏õ‡∏¥‡∏î‡∏â‡∏≤‡∏Å"</span> ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡∏ß‡πà‡∏≤‡πÄ‡∏Ç‡πá‡∏°‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö‡πÄ‡∏õ‡πâ‡∏≤‡πÑ‡∏´‡∏°<br>
                    üéØ <strong>‡∏ï‡∏£‡∏á‡∏Å‡∏•‡∏≤‡∏á‡πÄ‡∏õ‡πä‡∏∞:</strong> 4 ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô<br>
                    üü† <strong>‡∏Ç‡∏≠‡∏ö‡∏™‡πâ‡∏°:</strong> 3 ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô<br>
                    üü° <strong>‡∏Ç‡∏≠‡∏ö‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á:</strong> 2 ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô
                </div>
            </div>

            <div style="text-align:center; margin-top:10px;">
                <button class="game-btn btn-next" onclick="toggleRules()" style="padding:10px 30px; min-width:auto;">‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡πÅ‡∏•‡πâ‡∏ß!</button>
            </div>
        </div>
    </div>

    <div class="game-card">
        <h3 style="margin:0 0 20px 0; color:#bdc3c7; text-transform:uppercase; letter-spacing:2px;">Wavelength</h3>

        <div class="spectrum-container">
            <div class="left-word" id="word-left">‡∏ã‡πâ‡∏≤‡∏¢‡∏™‡∏∏‡∏î</div>
            <div class="arrow-divider">‚Üî</div>
            <div class="right-word" id="word-right">‡∏Ç‡∏ß‡∏≤‡∏™‡∏∏‡∏î</div>
        </div>

        <div class="dial-wrapper" id="dial-area">
            <svg viewBox="0 0 220 120">
                <path d="M 10 110 A 100 100 0 0 1 210 110" fill="none" stroke="#ecf0f1" stroke-width="20" stroke-linecap="round"/>
                <path d="M 10 110 A 100 100 0 0 1 210 110" fill="none" stroke="#bdc3c7" stroke-width="2" stroke-dasharray="2 8" opacity="0.5"/>

                <g id="target-group" transform="rotate(0, 110, 110)">
                    <path d="M 110 110 L 90 22 A 100 100 0 0 1 130 22 Z" fill="#f1c40f" opacity="0.6"/>
                    <path d="M 110 110 L 96 18 A 100 100 0 0 1 124 18 Z" fill="#e67e22" opacity="0.8"/>
                    <path d="M 110 110 L 102 14 A 100 100 0 0 1 118 14 Z" fill="#e74c3c"/>
                </g>

                <path id="screen-cover" d="M 5 110 A 105 105 0 0 1 215 110" fill="#3498db" stroke="white" stroke-width="2"/>

                <g id="pointer-group" transform="rotate(0, 110, 110)">
                    <line x1="110" y1="110" x2="10" y2="110" stroke="#c0392b" stroke-width="6" stroke-linecap="round" />
                    <circle cx="110" cy="110" r="8" fill="#c0392b" stroke="white" stroke-width="2"/>
                    <circle cx="10" cy="110" r="4" fill="#c0392b"/>
                </g>
            </svg>
        </div>

        <div class="score-display" id="score-text">...</div>

        <div class="controls">
            <button class="game-btn btn-hide" onclick="toggleScreen()">üëÅ ‡πÄ‡∏õ‡∏¥‡∏î/‡∏õ‡∏¥‡∏î ‡∏â‡∏≤‡∏Å</button>
            <button class="game-btn btn-next" onclick="newRound()">üé≤ ‡πÇ‡∏à‡∏ó‡∏¢‡πå‡πÉ‡∏´‡∏°‡πà</button>
        </div>
        <p style="font-size: 0.8rem; color: #aaa; margin-top: 15px;">‡∏Ñ‡∏•‡∏¥‡∏Å‡πÅ‡∏•‡∏∞‡∏•‡∏≤‡∏Å‡∏ó‡∏µ‡πà‡∏´‡∏ô‡πâ‡∏≤‡∏õ‡∏±‡∏î‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏´‡∏°‡∏∏‡∏ô‡πÄ‡∏Ç‡πá‡∏°</p>
    </div>

    <script>
        // --- ‡∏Ñ‡∏•‡∏±‡∏á‡∏Ñ‡∏≥ ---
        const categories = [
            ["‡∏£‡πâ‡∏≠‡∏ô", "‡∏´‡∏ô‡∏≤‡∏ß"], ["‡∏≠‡∏£‡πà‡∏≠‡∏¢", "‡πÑ‡∏°‡πà‡∏≠‡∏£‡πà‡∏≠‡∏¢"], ["‡∏°‡∏µ‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏ä‡∏ô‡πå", "‡πÑ‡∏£‡πâ‡∏™‡∏≤‡∏£‡∏∞"],
            ["‡∏á‡∏≤‡∏ô‡∏≠‡∏î‡∏¥‡πÄ‡∏£‡∏Å‡∏Ñ‡∏ô‡∏£‡∏ß‡∏¢", "‡∏á‡∏≤‡∏ô‡∏≠‡∏î‡∏¥‡πÄ‡∏£‡∏Å‡∏Ñ‡∏ô‡∏à‡∏ô"], ["‡∏´‡∏ô‡∏±‡∏á‡∏î‡∏µ", "‡∏´‡∏ô‡∏±‡∏á‡πÅ‡∏¢‡πà"], ["‡∏â‡∏•‡∏≤‡∏î", "‡πÇ‡∏á‡πà"],
            ["‡πÄ‡∏û‡∏•‡∏á‡πÄ‡∏®‡∏£‡πâ‡∏≤", "‡πÄ‡∏û‡∏•‡∏á‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∏‡∏Ç"], ["‡∏Ç‡∏≠‡∏á‡∏Å‡∏¥‡∏ô‡πÄ‡∏•‡πà‡∏ô", "‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏°‡∏∑‡πâ‡∏≠‡∏´‡∏•‡∏±‡∏Å"], ["‡∏Å‡∏•‡∏¥‡πà‡∏ô‡∏´‡∏≠‡∏°", "‡∏Å‡∏•‡∏¥‡πà‡∏ô‡πÄ‡∏´‡∏°‡πá‡∏ô"],
            ["‡∏Æ‡∏µ‡πÇ‡∏£‡πà", "‡∏ï‡∏±‡∏ß‡∏£‡πâ‡∏≤‡∏¢"], ["‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡∏ó‡∏≥‡∏¢‡∏≤‡∏Å", "‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡∏ó‡∏≥‡∏á‡πà‡∏≤‡∏¢"], ["‡∏ñ‡∏π‡∏Å‡∏Å‡∏é‡∏´‡∏°‡∏≤‡∏¢", "‡∏ú‡∏¥‡∏î‡∏Å‡∏é‡∏´‡∏°‡∏≤‡∏¢"],
            ["‡∏Ñ‡∏ô‡∏£‡∏±‡∏Å", "‡∏Ñ‡∏ô‡πÄ‡∏Å‡∏•‡∏µ‡∏¢‡∏î"], ["‡∏™‡∏Å‡∏õ‡∏£‡∏Å", "‡∏™‡∏∞‡∏≠‡∏≤‡∏î"], ["‡∏ô‡πà‡∏≤‡∏Å‡∏•‡∏±‡∏ß", "‡∏ô‡πà‡∏≤‡∏£‡∏±‡∏Å"],
            ["‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå", "‡πÅ‡∏ü‡∏ô‡∏ï‡∏≤‡∏ã‡∏µ"], ["‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏à‡∏£‡∏¥‡∏á", "‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÇ‡∏Å‡∏´‡∏Å"], ["‡πÄ‡∏Å‡∏¥‡∏ô‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô", "‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô‡∏°‡∏≤‡∏Å"],
            ["‡∏•‡πâ‡∏≤‡∏™‡∏°‡∏±‡∏¢", "‡∏ó‡∏±‡∏ô‡∏™‡∏°‡∏±‡∏¢"], ["‡∏£‡∏™‡∏à‡∏±‡∏î", "‡∏£‡∏™‡∏à‡∏∑‡∏î"], ["‡∏•‡∏±‡∏ö‡πÄ‡∏â‡∏û‡∏≤‡∏∞", "‡∏™‡∏≤‡∏ò‡∏≤‡∏£‡∏ì‡∏∞"],
            ["‡∏î‡∏≤‡∏£‡∏≤", "‡∏Ñ‡∏ô‡∏ò‡∏£‡∏£‡∏°‡∏î‡∏≤"], ["‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ñ‡∏π‡∏Å", "‡∏£‡∏≤‡∏Ñ‡∏≤‡πÅ‡∏û‡∏á"], ["‡∏ô‡∏∏‡πà‡∏°", "‡πÅ‡∏Ç‡πá‡∏á"],
            ["‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏î‡∏±‡∏á", "‡πÄ‡∏á‡∏µ‡∏¢‡∏ö"], ["‡πÄ‡∏ã‡πá‡∏Å‡∏ã‡∏µ‡πà", "‡πÑ‡∏°‡πà‡πÄ‡∏ã‡πá‡∏Å‡∏ã‡∏µ‡πà"], ["‡∏°‡∏µ‡∏°‡∏≤‡∏£‡∏¢‡∏≤‡∏ó", "‡∏´‡∏¢‡∏≤‡∏ö‡∏Ñ‡∏≤‡∏¢"],
            ["‡∏ô‡πà‡∏≤‡πÄ‡∏ö‡∏∑‡πà‡∏≠", "‡∏ï‡∏∑‡πà‡∏ô‡πÄ‡∏ï‡πâ‡∏ô"], ["‡∏™‡∏µ‡∏™‡∏î‡πÉ‡∏™", "‡∏™‡∏µ‡∏ó‡∏∂‡∏°‡πÜ"], ["‡πÉ‡∏ä‡πâ‡πÅ‡∏£‡∏á‡∏Å‡∏≤‡∏¢", "‡πÉ‡∏ä‡πâ‡∏™‡∏°‡∏≠‡∏á"],
            ["‡πÅ‡∏õ‡πä‡∏ö‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡πÄ‡∏™‡∏£‡πá‡∏à", "‡πÉ‡∏ä‡πâ‡πÄ‡∏ß‡∏•‡∏≤‡∏ô‡∏≤‡∏ô"], ["‡∏≠‡∏±‡∏ô‡∏ï‡∏£‡∏≤‡∏¢", "‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢"], ["‡∏Ç‡∏≠‡∏á‡πÉ‡∏ä‡πâ", "‡∏Ç‡∏≠‡∏á‡πÇ‡∏ä‡∏ß‡πå"],
            ["‡∏™‡∏±‡∏ï‡∏ß‡πå‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á", "‡∏™‡∏±‡∏ï‡∏ß‡πå‡∏õ‡πà‡∏≤"], ["‡∏•‡∏π‡∏Å‡∏Ñ‡∏∏‡∏ì‡∏´‡∏ô‡∏π", "‡πÄ‡∏î‡πá‡∏Å‡∏ö‡πâ‡∏≤‡∏ô‡πÜ"], ["‡∏®‡∏¥‡∏•‡∏õ‡∏∞", "‡∏û‡∏≤‡∏ì‡∏¥‡∏ä‡∏¢‡πå"],
            ["‡∏¢‡∏∏‡∏Ñ 90", "‡∏¢‡∏∏‡∏Ñ‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô"], ["‡∏Ç‡∏≠‡∏á‡πÅ‡∏ó‡πâ", "‡∏Ç‡∏≠‡∏á‡∏õ‡∏•‡∏≠‡∏°"], ["‡∏ï‡∏•‡∏Å", "‡πÄ‡∏Ñ‡∏£‡∏µ‡∏¢‡∏î"]
        ];

        // --- ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏£‡∏∞‡∏ö‡∏ö ---
        let targetAngle = 90;
        let currentPointerValue = 0;
        let isScreenClosed = true;
        let isDragging = false;

        const dialArea = document.getElementById('dial-area');
        const pointerGroup = document.getElementById('pointer-group');
        const targetGroup = document.getElementById('target-group');
        const screenCover = document.getElementById('screen-cover');
        const scoreText = document.getElementById('score-text');
        const rulesModal = document.getElementById('rulesModal');

        // --- Logic ‡∏™‡∏≠‡∏ô‡πÄ‡∏•‡πà‡∏ô ---
        function toggleRules(e) {
            // ‡∏ñ‡πâ‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡∏Å‡∏≤‡∏£‡∏Ñ‡∏•‡∏¥‡∏Å‡∏ó‡∏µ‡πà Overlay ‡∏´‡∏£‡∏∑‡∏≠‡∏õ‡∏∏‡πà‡∏°‡∏õ‡∏¥‡∏î
            if (!e || e.target === rulesModal || e.target.closest('.btn-rules') || e.target.closest('.modal-close') || e.target.closest('.btn-next')) {
                rulesModal.classList.toggle('active');
            }
        }

        // --- ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏°‡∏∏‡∏° ---
        function calculateAngle(e) {
            const rect = dialArea.getBoundingClientRect();
            const centerX = rect.left + rect.width / 2;
            const centerY = rect.top + (rect.height * (110/120)); 

            let clientX, clientY;
            if (e.touches && e.touches.length > 0) {
                clientX = e.touches[0].clientX;
                clientY = e.touches[0].clientY;
            } else {
                clientX = e.clientX;
                clientY = e.clientY;
            }

            const dx = clientX - centerX;
            const dy = clientY - centerY;
            
            let rad = Math.atan2(dy, dx); 
            let deg = rad * (180 / Math.PI);
            let gameValue = deg + 180;

            if (gameValue < 0) gameValue = 0;
            if (gameValue > 180) gameValue = 180;

            return gameValue;
        }

        function updateDialVisual(val0to180) {
            currentPointerValue = val0to180;
            pointerGroup.setAttribute('transform', `rotate(${val0to180}, 110, 110)`);
        }

        // --- Event Listeners ---
        function onDragStart(e) {
            isDragging = true;
            const angle = calculateAngle(e);
            updateDialVisual(angle);
        }

        function onDragMove(e) {
            if (!isDragging) return;
            e.preventDefault(); 
            const angle = calculateAngle(e);
            updateDialVisual(angle);
        }

        function onDragEnd() {
            isDragging = false;
        }

        dialArea.addEventListener('mousedown', onDragStart);
        window.addEventListener('mousemove', onDragMove);
        window.addEventListener('mouseup', onDragEnd);

        dialArea.addEventListener('touchstart', onDragStart, {passive: false});
        window.addEventListener('touchmove', onDragMove, {passive: false});
        window.addEventListener('touchend', onDragEnd);

        // --- Game Logic ---
        function newRound() {
            const pair = categories[Math.floor(Math.random() * categories.length)];
            document.getElementById('word-left').innerText = pair[0];
            document.getElementById('word-right').innerText = pair[1];

            targetAngle = Math.floor(Math.random() * 150) + 15;
            const rotationOffset = targetAngle - 90;
            targetGroup.setAttribute('transform', `rotate(${rotationOffset}, 110, 110)`);

            isScreenClosed = false; 
            screenCover.style.opacity = "0.15"; 
            scoreText.innerHTML = "<span style='color:#d35400'>‡∏ï‡∏≤‡∏Ñ‡∏ô‡πÉ‡∏ö‡πâ: ‡∏î‡∏π‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢ ‚ûù ‡∏ö‡∏≠‡∏Å‡∏Ñ‡∏≥‡πÉ‡∏ö‡πâ ‚ûù ‡∏õ‡∏¥‡∏î‡∏â‡∏≤‡∏Å</span>";
            
            updateDialVisual(90);
        }

        function toggleScreen() {
            if (isScreenClosed) {
                screenCover.style.opacity = "0"; 
                isScreenClosed = false;
                calculateScore();
            } else {
                screenCover.style.opacity = "1";
                isScreenClosed = true;
                scoreText.innerHTML = "<span style='color:#2980b9'>‡∏ï‡∏≤‡∏ó‡∏µ‡∏°‡∏ó‡∏≤‡∏¢: ‡∏´‡∏°‡∏∏‡∏ô‡πÄ‡∏Ç‡πá‡∏°‡πÅ‡∏î‡∏á ‚ûù ‡∏°‡∏±‡πà‡∏ô‡πÉ‡∏à‡πÅ‡∏•‡πâ‡∏ß‡∏Å‡∏î‡πÄ‡∏õ‡∏¥‡∏î</span>";
            }
        }

        function calculateScore() {
            const diff = Math.abs(currentPointerValue - targetAngle);
            let points = 0;
            let msg = "";
            let color = "";

            if (diff <= 4) { 
                points = 4; msg = "üéØ ‡πÄ‡∏õ‡πä‡∏∞‡πÄ‡∏ß‡∏≠‡∏£‡πå!! (4 ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô)"; color = "#e74c3c";
            } else if (diff <= 12) {
                points = 3; msg = "üëè ‡πÄ‡∏Å‡πà‡∏á‡∏°‡∏≤‡∏Å! (3 ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô)"; color = "#e67e22";
            } else if (diff <= 22) {
                points = 2; msg = "üëç ‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡πâ (2 ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô)"; color = "#f1c40f"; 
            } else {
                points = 0; msg = "üòÖ ‡∏ß‡πà‡∏≤‡∏ß‡∏Ñ‡∏£‡∏±‡∏ö (0 ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô)"; color = "#95a5a6";
            }
            scoreText.innerHTML = `<span style='color:${color}; font-size:1.6rem; text-shadow:0 2px 4px rgba(0,0,0,0.1)'>${msg}</span>`;
        }

        newRound();

    </script>
</body>
</html>